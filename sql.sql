CREATE DATABASE IF NOT EXISTS `CSYE6225`;
CREATE TABLE IF NOT EXISTS `majun`.`user` ( `ID` VARCHAR(40) NOT NULL PRIMARY KEY, `first_name` TEXT NOT NULL , `last_name` TEXT NOT NULL , `password` TEXT NOT NULL , `email_address` VARCHAR(100) NOT NULL UNIQUE, `account_created` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, `account_updated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS `majun`.`attachment` (`id` VARCHAR(40) NOT NULL PRIMARY KEY , `file_name` TEXT NOT NULL , `url` TEXT NOT NULL , `upload_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP , `lastModifiedDate` TEXT NOT NULL , `SIZE` INT NOT NULL DEFAULT 0 , `MD5` TEXT NOT NULL ) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS `majun`.`Bill` ( `id` VARCHAR(40) NOT NULL PRIMARY KEY, `created_ts` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_ts` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, `owner_id` VARCHAR(40) NOT NULL , `attachment_id` VARCHAR(40), `vendor` TEXT NOT NULL , `bill_date` DATETIME NOT NULL , `due_date` DATETIME NOT NULL , `amount_due` DOUBLE NOT NULL , `categories` TEXT NOT NULL , `paymentStatus` ENUM('paid','due','past_due','no_payment_required') , FOREIGN KEY(attachment_id) REFERENCES `attachment`(ID) ON DELETE SET NULL, FOREIGN KEY(owner_id) REFERENCES `user`(ID) ON DELETE CASCADE) ENGINE = InnoDB
